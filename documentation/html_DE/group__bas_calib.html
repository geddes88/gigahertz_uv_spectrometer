<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>S-SDK-BTS2048: Basis-Kalibriermethoden</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="GOlogo_nurG_volleAufloesung.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">S-SDK-BTS2048
   &#160;<span id="projectnumber">Gigahertz-Optik Bibliothek für die Einbindung eines BTS2048.</span>
   </div>
   <div id="projectbrief">© bei Gigahertz-Optik GmbH. Alle Rechte vorbehalten</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Erzeugt von Doxygen 1.8.12 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__bas_calib.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Funktionen</a>  </div>
  <div class="headertitle">
<div class="title">Basis-Kalibriermethoden</div>  </div>
</div><!--header-->
<div class="contents">

<p>Die folgenden Methoden sind für die Durchführung von Kalibrierungen nötig.  
<a href="#details">Mehr ...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funktionen</h2></td></tr>
<tr class="memitem:ga35bfb9c4d545a12a45832bc1a75ae5e6"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga35bfb9c4d545a12a45832bc1a75ae5e6.html#ga35bfb9c4d545a12a45832bc1a75ae5e6">GOMDBTS2048_calibLoadFromDevice</a> (int handle)</td></tr>
<tr class="separator:ga35bfb9c4d545a12a45832bc1a75ae5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c4259d10c3322a1dcca122c8c2863f7"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga0c4259d10c3322a1dcca122c8c2863f7.html#ga0c4259d10c3322a1dcca122c8c2863f7">GOMDBTS2048_calibSaveToDevice</a> (int handle, int configNumber)</td></tr>
<tr class="separator:ga0c4259d10c3322a1dcca122c8c2863f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c712f9e0b6ae6eef9316f48f88f7bd2"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga3c712f9e0b6ae6eef9316f48f88f7bd2.html#ga3c712f9e0b6ae6eef9316f48f88f7bd2">GOMDBTS2048_calibSetCalibLampFileName</a> (int handle, char *filename)</td></tr>
<tr class="separator:ga3c712f9e0b6ae6eef9316f48f88f7bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c2399e89b31fe5586b9fba2eda2d63e"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga4c2399e89b31fe5586b9fba2eda2d63e.html#ga4c2399e89b31fe5586b9fba2eda2d63e">GOMDBTS2048_calibGetCalibLampFileName</a> (int handle, char *filename)</td></tr>
<tr class="separator:ga4c2399e89b31fe5586b9fba2eda2d63e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab81df3372eb82de77eac96a04ebd6cbc"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_gab81df3372eb82de77eac96a04ebd6cbc.html#gab81df3372eb82de77eac96a04ebd6cbc">GOMDBTS2048_calibMeasureSpectral</a> (int handle, double *saturation, double *countsDark, double *countsSignal, double *calFactors)</td></tr>
<tr class="separator:gab81df3372eb82de77eac96a04ebd6cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d590c6fe4048c13a3373baaf471c588"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga7d590c6fe4048c13a3373baaf471c588.html#ga7d590c6fe4048c13a3373baaf471c588">GOMDBTS2048_calibMeasureIntegral</a> (int handle, double *currentDark, double *currentSignal, double *calFactor)</td></tr>
<tr class="separator:ga7d590c6fe4048c13a3373baaf471c588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92353ff186f8155cdc84c7fa2a7e97a6"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga92353ff186f8155cdc84c7fa2a7e97a6.html#ga92353ff186f8155cdc84c7fa2a7e97a6">GOMDBTS2048_calibSetIntegrationTimeInUs</a> (int handle, int value)</td></tr>
<tr class="separator:ga92353ff186f8155cdc84c7fa2a7e97a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d7e054e8a239b049ed58483152868a7"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga9d7e054e8a239b049ed58483152868a7.html#ga9d7e054e8a239b049ed58483152868a7">GOMDBTS2048_calibGetIntegrationTimeInUs</a> (int handle, int *value)</td></tr>
<tr class="separator:ga9d7e054e8a239b049ed58483152868a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ce56a711b0bc1f4944531c1406e265f"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga4ce56a711b0bc1f4944531c1406e265f.html#ga4ce56a711b0bc1f4944531c1406e265f">GOMDBTS2048_calibSetCalibrationName</a> (int handle, char *name)</td></tr>
<tr class="separator:ga4ce56a711b0bc1f4944531c1406e265f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ebaa9d417aea028228cdf2e844dde19"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga6ebaa9d417aea028228cdf2e844dde19.html#ga6ebaa9d417aea028228cdf2e844dde19">GOMDBTS2048_calibGetCalibrationName</a> (int handle, char *name)</td></tr>
<tr class="separator:ga6ebaa9d417aea028228cdf2e844dde19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3a33f22fa2b8d3cafd7f463d04144c1"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_gae3a33f22fa2b8d3cafd7f463d04144c1.html#gae3a33f22fa2b8d3cafd7f463d04144c1">GOMDBTS2048_calibSetCalibMode</a> (int handle, int value)</td></tr>
<tr class="separator:gae3a33f22fa2b8d3cafd7f463d04144c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga139010b97956d9fb1f6a51a59ab3c74f"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga139010b97956d9fb1f6a51a59ab3c74f.html#ga139010b97956d9fb1f6a51a59ab3c74f">GOMDBTS2048_calibGetCalibMode</a> (int handle, int *value)</td></tr>
<tr class="separator:ga139010b97956d9fb1f6a51a59ab3c74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga890cf28fb5b433c1d8d60956d2e18308"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga890cf28fb5b433c1d8d60956d2e18308.html#ga890cf28fb5b433c1d8d60956d2e18308">GOMDBTS2048_calibSetHighResolutionMode</a> (int handle, int value)</td></tr>
<tr class="separator:ga890cf28fb5b433c1d8d60956d2e18308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9750d5318f912500b2ff815a6e8070fb"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_ga9750d5318f912500b2ff815a6e8070fb.html#ga9750d5318f912500b2ff815a6e8070fb">GOMDBTS2048_calibGetHighResolutionMode</a> (int handle, int *value)</td></tr>
<tr class="separator:ga9750d5318f912500b2ff815a6e8070fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe7c97fe00ed1045be44a3722357073b"><td class="memItemLeft" align="right" valign="top">int __stdcall&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bas_calib_gafe7c97fe00ed1045be44a3722357073b.html#gafe7c97fe00ed1045be44a3722357073b">GOMDBTS2048_calibCalculateSpectralCalibrationFactors</a> (int handle, double *calFactors)</td></tr>
<tr class="separator:gafe7c97fe00ed1045be44a3722357073b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Ausführliche Beschreibung</h2>
<p>Die folgenden Methoden sind für die Durchführung von Kalibrierungen nötig. Diese Methoden sind frei aufrufbar, die Speichermethode der Kalibrierkonfiguration ist jedoch passwortgeschützt, da zum Kalibrieren besondere Voraussetzungen erfüllt sein müssen. Zum Speichern stehen die Konfigurationsnummern 15 – 23 zur freien Verfügung. Die Konfigurationsnummern 0 – 14 sind für Werkskalibrierungen reserviert. Die unterschiedlichen Konfigurationsbereiche sind passwortgeschützt (siehe Methode „setPassword“). Die Berechtigung wird aber erst bei Aufruf der Methode „calibSaveToDevice“ überprüft. <br />
 Bevor eine Kalibrierung gespeichert werden kann, müssen alle notwendigen Daten mit den in diesem Kapitel aufgeführten Methoden gesetzt worden sein. Wenn bei einer bestehenden Kalibrierung nur einzelne Daten geändert werden sollen empfiehlt es sich die bereits bestehende Kalibrierung zu laden, die zu ändernden Daten danach neu zu setzen und dann die Kalibrierung entweder unter einer neuen Konfigurationsnummer oder unter der alten Konfigurationsnummer zu speichern. <br />
 Für den Anfang empfehlen wir die Basis-Kalibriermethoden zu verwenden. Die Applikation kann dann Stück für Stück um den manuellen Kalibriermethoden ergänzt werden. <br />
 Die Basis-Kalibriermethoden werden benötigt, um eine Kalibrierung softwaregestützt durchführen zu können (Messung und Speicherung). Dieses Vorgehen wird bei Rekalibrierungen stets empfohlen. Falls die zu setzenden Kalibrierfaktoren nicht bekannt sind, indem sie gesondert ermittelt worden sind, stehen zwei Messmethoden zur Verfügung, mit denen die Kalibrierung durchgeführt werden kann. <br />
 Sämtliche Kalibrierdaten werden zunächst in einem temporären Speicher zwischengespeichert und erst mit Aufruf der Speichermethode in den Speicher des Messgeräts übertragen. <br />
 Der einfachste Fall einer Kalibrierung kann folgendermaßen erfolgen: <br />
 1. Bestehende Kalibrierung laden (calibLoadFromDevice) <br />
 2. Kalibrierstandard setzen (calibSetCalibLampFileName) <br />
 3. Substitutionskorrektur durchführen (siehe Substitutionsfunktionen) <br />
 4. Kalibrierlampe einschalten und Einbrennzeit abwarten <br />
 5. Integrationszeit für die spektrale Kalibriermessung einstellen (calibSetIntegrationTimeInUs) <br />
 6. Kalibriermessung spektral durchführen (calibMeasureSpectral) <br />
 7. Wenn die Sättigung zu niedrig ist, dann zurück zu Schritt 4 <br />
 8. Kalibriermessung integral durchführen (calibMeasureIntegral) <br />
 9. Eventuell neuen Namen für die Kalibrierung definieren (calibSetCalibrationName) <br />
 10. Kalibrierung im Messgerät unter einer Konfigurationsnummer ablegen (calibSaveToDevice). Eine bereits an der Stelle bestehende Konfiguration wird überschrieben <br />
<br />
 Kalibrierung mit meheren Kalibrierstandards (wichtig für BTS2048-UV Geräte) <br />
 Wenn mehr als eine Lampe zur Kalibrierung verwendet werden soll, muss die oben Beschriebene Routine leicht angepasst werden. Dies ist besonders bei BTS2048-UV Geräten von Bedeutung da hier die Kalibrierung mit einer Deuterium- und einer Halogen-Lampe empfohlen wird, um den gesamten WL-Bereich abzudecken. <br />
 Bevor der Kalibrierstandard gesetzt wird, muss der Kalibriermodus auf den Wert 2 gesetzt werden (calibSetCalibMode). Dann müssen die Punkte 2 bis 7 in der obigen Liste für jede Lampe einzeln durchgeführt werden. Wichtig: Die Lampen-Daten(im Kalibrierstandard) sollten dürfen nur für den WL-Bereich definiert sein, in dem diese für die Kalibrierung verwendet werden (Der WL-Bereich für Halogen Lampen sollte 350nm nicht unterschreiten). <br />
 Wenn alle Lampen vermessen wurden, muss die Routine calibCalculateSpectralCalibrationFactors() aufgerufen werden. Die einzelnen spektralen Messungen werden dann zusammengefasst und das berechnete Spektrum ausgegeben. <br />
 Danach kann in der obigen Liste bei Punkt 8 fortgefahren werden. Beachten Sie, dass der richtige Kalibrierstandard für die integrale Messung gesetzt ist (calibGetLampFileName). Achtung: Die verwendete Lampe sollte den gesamten WL-Bereich der Diode abdecken (bei BTS2048-UV Geräten wird hier eine Deuterium Lampe empfohlen).</p>
<h1><a class="anchor" id="Ex13"></a>
C++ Aufrufbeispiel</h1>
<p>Kalibrierdaten und Bezeichnungen der Kalibrierungen laden.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> handle;</div><div class="line"><a class="code" href="group__standard_gadb1f231e318cf49d96f200ecbbcb8391.html#gadb1f231e318cf49d96f200ecbbcb8391">GOMDBTS2048_getHandle</a>(NULL, &amp;handle);                                   <span class="comment">//initialization</span></div><div class="line"><span class="keywordtype">char</span> value[32];</div><div class="line"><a class="code" href="group__bas_calib_ga35bfb9c4d545a12a45832bc1a75ae5e6.html#ga35bfb9c4d545a12a45832bc1a75ae5e6">GOMDBTS2048_calibLoadFromDevice</a>(handle);                                <span class="comment">//load calibration data</span></div><div class="line"><a class="code" href="group__bas_calib_ga6ebaa9d417aea028228cdf2e844dde19.html#ga6ebaa9d417aea028228cdf2e844dde19">GOMDBTS2048_calibGetCalibrationName</a>(handle, value);</div><div class="line"><span class="comment">//do anything with values</span></div><div class="line"><a class="code" href="group__standard_gaace5c1340e1331869519415f135c3a98.html#gaace5c1340e1331869519415f135c3a98">GOMDBTS2048_releaseHandle</a>(handle);                                      <span class="comment">//release handle</span></div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
   <!--<!li class="footer">Erzeugt von 
   <a href="http://www.doxygen.org/index.html">
   <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>-->
  </ul>
</div>
</body>
</html>
